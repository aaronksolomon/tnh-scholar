
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Chooses JSON-LD as the canonical metadata format to capture provenance, relationships, and future semantic queries.">
      
      
      
      
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>ADR-MD01: Adoption of JSON-LD for Metadata Management - TNH Scholar Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.a40c8224.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#adr-md01-adoption-of-json-ld-for-metadata-management" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="TNH Scholar Documentation" class="md-header__button md-logo" aria-label="TNH Scholar Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TNH Scholar Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ADR-MD01: Adoption of JSON-LD for Metadata Management
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/aaronksolomon/tnh-scholar" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="TNH Scholar Documentation" class="md-nav__button md-logo" aria-label="TNH Scholar Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    TNH Scholar Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aaronksolomon/tnh-scholar" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../getting-started/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../getting-started/quick-start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../getting-started/configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/patterns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pattern System
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/best-practices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CLI Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            CLI Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/tnh-fab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tnh-fab
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/audio-transcribe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    audio-transcribe
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/ytt-fetch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ytt-fetch
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/nfmt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nfmt
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/token-count/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    token-count
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/tnh-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tnh-setup
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Development
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../development/system-design/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Overview
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../development/contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Design
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../development/design-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Design Guide
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_2" >
        
          
          <label class="md-nav__link" for="__nav_6_3_2" id="__nav_6_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CLI Design
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_2">
            <span class="md-nav__icon md-icon"></span>
            CLI Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_2_1" >
        
          
          <label class="md-nav__link" for="__nav_6_3_2_1" id="__nav_6_3_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    TNH-FAB
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_3_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_2_1">
            <span class="md-nav__icon md-icon"></span>
            TNH-FAB
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tnh-fab/design/text-processing-cli-design-v1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v1
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tnh-fab/design/text-processing-cli-design-v2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v2
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_2_2" >
        
          
          <label class="md-nav__link" for="__nav_6_3_2_2" id="__nav_6_3_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    YTT-Fetch
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_3_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_2_2">
            <span class="md-nav__icon md-icon"></span>
            YTT-Fetch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ytt-fetch/adr/adr-yf00-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  
    
  
  
    <span class="md-status md-status--historical"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ytt-fetch/adr/adr-yf01-transcript-source-handling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transcript Source
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ytt-fetch/adr/adr-yf02-yt-dlp-transcripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YT-DLP Integration
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ytt-fetch/design/yt-dlp-vs-youtube-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Comparison
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup-tnh/design/setup-design/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SETUP-TNH
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../docs-design/design/documentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docs-Design
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_2" >
        
          
          <label class="md-nav__link" for="__nav_6_4_2" id="__nav_6_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Docs-Planning
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_2">
            <span class="md-nav__icon md-icon"></span>
            Docs-Planning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs-design/planning/roadmap.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roadmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs-design/planning/maintenance.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Maintenance
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5" >
        
          
          <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Research
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5">
            <span class="md-nav__icon md-icon"></span>
            Research
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../gpt_4o_search_query_text_pair_testing/testing_input_output.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query Generation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../gpt_4o_translations_experiments/passage_test.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Translation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../translation_research.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Translation Research
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../preliminary_feasibility_study.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Feasibility Study
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    <span class="md-ellipsis">
      Context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decision-drivers" class="md-nav__link">
    <span class="md-ellipsis">
      Decision Drivers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decision" class="md-nav__link">
    <span class="md-ellipsis">
      Decision
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#technical-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Technical Implementation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Example Usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consequences" class="md-nav__link">
    <span class="md-ellipsis">
      Consequences
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Consequences">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#positive" class="md-nav__link">
    <span class="md-ellipsis">
      Positive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#negative" class="md-nav__link">
    <span class="md-ellipsis">
      Negative
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neutral" class="md-nav__link">
    <span class="md-ellipsis">
      Neutral
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternative-approaches-considered" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative Approaches Considered
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Alternative Approaches Considered">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-yaml-frontmatter" class="md-nav__link">
    <span class="md-ellipsis">
      Simple YAML Frontmatter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-metadata-format" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Metadata Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Strategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    <span class="md-ellipsis">
      Notes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-documents" class="md-nav__link">
    <span class="md-ellipsis">
      Related Documents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adr-002-metadata-implementation-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      ADR 002: Metadata Implementation Strategy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ADR 002: Metadata Implementation Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#status" class="md-nav__link">
    <span class="md-ellipsis">
      Status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context_1" class="md-nav__link">
    <span class="md-ellipsis">
      Context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decision-drivers_1" class="md-nav__link">
    <span class="md-ellipsis">
      Decision Drivers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decision_1" class="md-nav__link">
    <span class="md-ellipsis">
      Decision
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consequences_1" class="md-nav__link">
    <span class="md-ellipsis">
      Consequences
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Consequences">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#positive_1" class="md-nav__link">
    <span class="md-ellipsis">
      Positive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#negative_1" class="md-nav__link">
    <span class="md-ellipsis">
      Negative
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neutral_1" class="md-nav__link">
    <span class="md-ellipsis">
      Neutral
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-approaches-considered_1" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative Approaches Considered
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Alternative Approaches Considered">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#type-alias" class="md-nav__link">
    <span class="md-ellipsis">
      Type Alias
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pydantic-model" class="md-nav__link">
    <span class="md-ellipsis">
      Pydantic Model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attrsdataclasses" class="md-nav__link">
    <span class="md-ellipsis">
      attrs/dataclasses
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jsonschemajson-schema" class="md-nav__link">
    <span class="md-ellipsis">
      jsonschema/JSON Schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#existing-metadata-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      Existing Metadata Libraries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#related-project-approaches" class="md-nav__link">
    <span class="md-ellipsis">
      Related Project Approaches
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-strategy_1" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes_1" class="md-nav__link">
    <span class="md-ellipsis">
      Notes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#related-documents_1" class="md-nav__link">
    <span class="md-ellipsis">
      Related Documents
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adr-003-metadata-validation-and-serialization-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      ADR 003: Metadata Validation and Serialization Strategy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ADR 003: Metadata Validation and Serialization Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#status_1" class="md-nav__link">
    <span class="md-ellipsis">
      Status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context_2" class="md-nav__link">
    <span class="md-ellipsis">
      Context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#current-implementation-prototype-phase" class="md-nav__link">
    <span class="md-ellipsis">
      Current Implementation (Prototype Phase)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#future-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Future Considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decision_2" class="md-nav__link">
    <span class="md-ellipsis">
      Decision
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consequences_2" class="md-nav__link">
    <span class="md-ellipsis">
      Consequences
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#future-directions" class="md-nav__link">
    <span class="md-ellipsis">
      Future Directions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes_2" class="md-nav__link">
    <span class="md-ellipsis">
      Notes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="adr-md01-adoption-of-json-ld-for-metadata-management">ADR-MD01: Adoption of JSON-LD for Metadata Management</h1>
<p>Commits to JSON-LD metadata so provenance, multilingual transformations, and semantic relationships stay queryable.</p>
<ul>
<li><strong>Status</strong>: Proposed</li>
<li><strong>Date</strong>: 2025-01-30</li>
</ul>
<h3 id="context">Context</h3>
<p>TNH Scholar needs a robust metadata management system to track content through various processing stages, particularly for multilingual content processing and human-AI collaborative workflows. The system must support both embedded metadata in text files and associated metadata for binary files, while enabling future expansion to database storage.</p>
<p>Two primary approaches were considered:</p>
<ol>
<li>Simple YAML frontmatter with basic key-value pairs</li>
<li>JSON-LD based metadata using semantic web standards</li>
</ol>
<p>The initial inclination was toward YAML frontmatter for its simplicity and readability. However, deeper analysis revealed that JSON-LD's semantic capabilities align well with TNH Scholar's document processing and provenance tracking needs.</p>
<h3 id="decision-drivers">Decision Drivers</h3>
<ol>
<li>Need to track content transformations through multiple processing stages</li>
<li>Requirement to maintain clear provenance for AI-assisted translations</li>
<li>Future requirements for web-based interfaces showing processing history</li>
<li>Importance of standardized metadata for content management</li>
<li>Value of semantic relationships in understanding content connections</li>
<li>Long-term extensibility requirements</li>
</ol>
<h3 id="decision">Decision</h3>
<p>We will adopt JSON-LD as TNH Scholar's primary metadata format, implemented through a phased approach:</p>
<p>Phase 1: File-based Storage</p>
<ul>
<li>Embedded JSON-LD in text files using frontmatter</li>
<li>Sidecar JSON-LD files for binary content</li>
<li>Basic metadata validation and processing through pyld</li>
</ul>
<p>Phase 2: Enhanced Processing</p>
<ul>
<li>Expanded semantic relationships</li>
<li>Improved validation</li>
<li>Training data extraction capabilities</li>
</ul>
<p>Phase 3: Database Integration</p>
<ul>
<li>Central metadata storage</li>
<li>Unified querying</li>
<li>Maintained backward compatibility with file-based storage</li>
</ul>
<h3 id="technical-implementation">Technical Implementation</h3>
<p>Initial implementation will center on a Frontmatter class handling JSON-LD:</p>
<pre><code class="language-python">class Frontmatter:
    &quot;&quot;&quot;Handles JSON-LD frontmatter embedding and extraction.&quot;&quot;&quot;

    SCHEMA_ORG = &quot;https://schema.org/&quot;
    DC_CONTEXT = &quot;http://purl.org/dc/elements/1.1/&quot;

    @staticmethod
    def extract(content: str) -&gt; Tuple[Dict[str, Any], str]:
        &quot;&quot;&quot;Extract JSON-LD frontmatter and content from text.&quot;&quot;&quot;

    @staticmethod
    def embed(metadata: Dict[str, Any], content: str) -&gt; str:
        &quot;&quot;&quot;Embed metadata as JSON-LD frontmatter.&quot;&quot;&quot;

    @staticmethod
    def validate_jsonld(metadata: Dict[str, Any]) -&gt; bool:
        &quot;&quot;&quot;Validate if the metadata is valid JSON-LD.&quot;&quot;&quot;
</code></pre>
<h3 id="example-usage">Example Usage</h3>
<p>Document processing workflow metadata:</p>
<pre><code class="language-javascript">{
  &quot;@context&quot;: &quot;https://schema.org/&quot;,
  &quot;@type&quot;: &quot;Translation&quot;,
  &quot;@id&quot;: &quot;translation_123_revised&quot;,
  &quot;translationOf&quot;: {&quot;@id&quot;: &quot;transcript_123_raw&quot;},
  &quot;basedOn&quot;: {&quot;@id&quot;: &quot;translation_123_draft&quot;},
  &quot;sourceLanguage&quot;: &quot;vi&quot;,
  &quot;targetLanguage&quot;: &quot;en&quot;,
  &quot;processingStage&quot;: &quot;human_revised&quot;,
  &quot;revisor&quot;: &quot;John Doe&quot;,
  &quot;revisionDate&quot;: &quot;2024-01-30&quot;
}
</code></pre>
<h3 id="consequences">Consequences</h3>
<h4 id="positive">Positive</h4>
<ol>
<li>Rich semantic relationships between content</li>
<li>Standard vocabularies through schema.org and Dublin Core</li>
<li>Strong support for content provenance tracking</li>
<li>Better foundation for future web interfaces</li>
<li>Industry-standard metadata format</li>
<li>Enhanced machine readability for AI processing</li>
</ol>
<h4 id="negative">Negative</h4>
<ol>
<li>Increased complexity compared to YAML</li>
<li>Steeper learning curve for contributors</li>
<li>Additional dependency on pyld library</li>
<li>More complex validation requirements</li>
</ol>
<h4 id="neutral">Neutral</h4>
<ol>
<li>Changes to existing metadata handling required</li>
<li>Need for migration strategy from current formats</li>
<li>Documentation requirements for JSON-LD usage</li>
</ol>
<h3 id="alternative-approaches-considered">Alternative Approaches Considered</h3>
<h4 id="simple-yaml-frontmatter">Simple YAML Frontmatter</h4>
<pre><code class="language-yaml">type: translation
id: translation_123
source_id: transcript_123
language: vi
target_language: en
</code></pre>
<p>While simpler, this approach lacks semantic richness and standardization.</p>
<h4 id="custom-metadata-format">Custom Metadata Format</h4>
<p>Creating a custom format was rejected due to:</p>
<ul>
<li>Reinventing existing solutions</li>
<li>Lack of standardization</li>
<li>Limited tool support</li>
</ul>
<h3 id="implementation-strategy">Implementation Strategy</h3>
<ol>
<li>
<p>Initial Phase</p>
</li>
<li>
<p>Implement basic JSON-LD frontmatter handling</p>
</li>
<li>Focus on core metadata fields</li>
<li>
<p>Simple validation</p>
</li>
<li>
<p>Enhancement Phase</p>
</li>
<li>
<p>Add semantic relationship support</p>
</li>
<li>Improve validation</li>
<li>
<p>Develop migration tools</p>
</li>
<li>
<p>Integration Phase</p>
</li>
<li>
<p>Database integration</p>
</li>
<li>Advanced querying</li>
<li>Web interface support</li>
</ol>
<h3 id="notes">Notes</h3>
<p>This decision prioritizes long-term system capabilities over short-term simplicity. The initial complexity investment is justified by:</p>
<ol>
<li>Enhanced content relationship tracking</li>
<li>Better support for human-AI workflow management</li>
<li>Improved potential for web interface development</li>
<li>Standard compliance for potential interoperability</li>
</ol>
<h3 id="related-documents">Related Documents</h3>
<ul>
<li>TNH Scholar System Design (system-design.md)</li>
<li>Pattern System Documentation (patterns.md)</li>
<li>Text Processing Documentation</li>
</ul>
<p>The semantic capabilities of JSON-LD align particularly well with TNH Scholar's vision for cyclical learning and content processing improvements as outlined in the system architecture document.</p>
<p>Here's the ADR documentation for the metadata implementation:</p>
<h2 id="adr-002-metadata-implementation-strategy">ADR 002: Metadata Implementation Strategy</h2>
<p>02-01-2025</p>
<h3 id="status">Status</h3>
<p>Accepted</p>
<h3 id="context_1">Context</h3>
<p>TNH Scholar needs a flexible metadata storage solution during its rapid prototyping phase. The system currently uses <code>Dict[str, Any]</code> throughout for metadata storage, but requires a more controlled yet still flexible approach that:</p>
<ol>
<li>Maintains JSON serializability for AI pipeline integration</li>
<li>Preserves dict-like operations (especially the | operator for combining metadata)</li>
<li>Allows schema flexibility during prototyping</li>
<li>Provides clear extension points for future structure</li>
</ol>
<p>Two main approaches were considered:</p>
<ol>
<li>Type alias: <code>Metadata = Dict[str, Any]</code></li>
<li>Custom class implementing MutableMapping</li>
</ol>
<h3 id="decision-drivers_1">Decision Drivers</h3>
<ol>
<li>Need for JSON serializability in AI pipelines</li>
<li>Heavy use of dict union operations (|) in existing code</li>
<li>Requirement for maximum flexibility during prototyping</li>
<li>Future extensibility requirements</li>
<li>Minimal overhead during development</li>
</ol>
<h3 id="decision_1">Decision</h3>
<p>Implement a custom <code>Metadata</code> class using <code>MutableMapping</code> that provides dict-like behavior while ensuring JSON serializability:</p>
<pre><code class="language-python">from collections.abc import MutableMapping
from typing import Any, Dict, Optional, Union, Iterator, Mapping

JsonValue = Union[str, int, float, bool, list, dict, None]

class Metadata(MutableMapping):
    &quot;&quot;&quot;
    Flexible metadata container that behaves exactly like a dict while ensuring
    JSON serializability. Designed for AI processing pipelines where schema
    flexibility is prioritized over structure.
    &quot;&quot;&quot;
    def __init__(self, data: Optional[Union[Dict[str, JsonValue], 'Metadata']] = None) -&gt; None:
        self._data: Dict[str, JsonValue] = {}
        if data is not None:
            self.update(data._data if isinstance(data, Metadata) else data)

    # [Core implementation as shown above...]
</code></pre>
<p>This implementation was chosen over a simple type alias because it provides:</p>
<ul>
<li>JSON serializability guarantees</li>
<li>Full dict-like behavior including all operators</li>
<li>Clear extension points for future enhancements</li>
<li>Type safety for JSON values</li>
<li>Explicit serialization methods</li>
</ul>
<h3 id="consequences_1">Consequences</h3>
<h4 id="positive_1">Positive</h4>
<ol>
<li>Ensures metadata remains JSON-serializable</li>
<li>Maintains all dict operations including | operator</li>
<li>Makes metadata objects self-identifying</li>
<li>Provides clear path for adding validation/structure later</li>
<li>Explicit serialization methods improve code clarity</li>
</ol>
<h4 id="negative_1">Negative</h4>
<ol>
<li>Slightly more complex than simple type alias</li>
<li>Need to implement and maintain custom class</li>
<li>Must ensure all dict operations are properly supported</li>
<li>Minor performance overhead compared to raw dict</li>
</ol>
<h4 id="neutral_1">Neutral</h4>
<ol>
<li>Changes required to existing Dict[str, Any] usage</li>
<li>Need to document class behavior and limitations</li>
<li>May need to add features as dict usage patterns emerge</li>
</ol>
<h3 id="alternative-approaches-considered_1">Alternative Approaches Considered</h3>
<h4 id="type-alias">Type Alias</h4>
<pre><code class="language-python">Metadata = Dict[str, Any]
</code></pre>
<p>Rejected because it provides no guarantees about JSON serializability and no extension points for future enhancements.</p>
<h4 id="pydantic-model">Pydantic Model</h4>
<p>Rejected as too structured for current prototyping needs.</p>
<h4 id="attrsdataclasses">attrs/dataclasses</h4>
<ul>
<li>Python's built-in dataclass or attrs library</li>
<li>Offers strong typing and validation</li>
<li>Rejected as requiring too rigid structure for current needs</li>
</ul>
<h4 id="jsonschemajson-schema">jsonschema/JSON Schema</h4>
<ul>
<li>Provides flexible schema validation</li>
<li>Rejected as overkill for current metadata needs</li>
<li>Could be considered for future validation requirements</li>
</ul>
<h4 id="existing-metadata-libraries">Existing Metadata Libraries</h4>
<ul>
<li><code>python-metadata</code>: Dedicated metadata handling</li>
<li><code>metadatastore</code>: Scientific metadata management</li>
<li><code>dublin-core-metadata</code>: Dublin Core implementation</li>
<li>All rejected as adding unnecessary complexity during prototyping</li>
</ul>
<h4 id="related-project-approaches">Related Project Approaches</h4>
<p>Examined metadata handling in:</p>
<ul>
<li>Documentation tools (Sphinx, mkdocs, pelican)</li>
<li>Git metadata systems</li>
<li>Python package metadata</li>
</ul>
<p>Found these approaches either too specialized or too complex for current needs</p>
<h3 id="implementation-strategy_1">Implementation Strategy</h3>
<ol>
<li>Initial Implementation</li>
<li>Create Metadata class with full dict behavior</li>
<li>Ensure JSON value type constraints</li>
<li>
<p>Add basic serialization methods</p>
</li>
<li>
<p>Migration</p>
</li>
<li>Replace Dict[str, Any] usage with Metadata class</li>
<li>Update existing metadata handling code</li>
<li>
<p>Document any behavioral differences</p>
</li>
<li>
<p>Future Considerations</p>
</li>
<li>Potential addition of schema validation</li>
<li>Integration with Dublin Core standards</li>
<li>Enhanced metadata merging strategies</li>
</ol>
<h3 id="notes_1">Notes</h3>
<p>This decision prioritizes flexibility and simplicity during prototyping while ensuring basic guarantees about metadata structure and behavior. The implementation can evolve toward more structured approaches as requirements solidify.</p>
<p>The design specifically supports AI pipeline integration by maintaining JSON compatibility while providing full dict-like operations for easy metadata manipulation.</p>
<h3 id="related-documents_1">Related Documents</h3>
<ul>
<li>ADR 001: Adoption of JSON-LD for Metadata Management</li>
<li>TNH Scholar System Design (system-design.md)</li>
<li>Pattern System Documentation (patterns.md)</li>
</ul>
<p>Yes, good points about the deeper validation needs and potential extensibility. Let's draft an ADR to document these considerations:</p>
<h2 id="adr-003-metadata-validation-and-serialization-strategy">ADR 003: Metadata Validation and Serialization Strategy</h2>
<p>02-23-2024</p>
<h3 id="status_1">Status</h3>
<p>Proposed - Prototyping Phase</p>
<h3 id="context_2">Context</h3>
<p>The TNH Scholar system needs flexible metadata handling that balances immediate prototyping needs with potential future requirements. Current implementation using JsonValue typing provides basic type safety but has several limitations and considerations that need to be documented.</p>
<p>Key Issues:
1. Recursive Validation
   - Current JsonValue validation is shallow
   - Nested dictionaries may contain non-serializable objects
   - List contents are not validated</p>
<ol>
<li>Object Serialization</li>
<li>Some objects may have valid serialization methods</li>
<li>Current approach limited to primitive JSON types</li>
<li>
<p>No standard interface for serializable objects</p>
</li>
<li>
<p>Type Processing</p>
</li>
<li>Current processing happens at initialization</li>
<li>No validation on subsequent updates</li>
<li>Limited to predefined type processors</li>
</ol>
<h3 id="current-implementation-prototype-phase">Current Implementation (Prototype Phase)</h3>
<pre><code class="language-python">JsonValue = Union[str, int, float, bool, list, dict, None]

class Metadata(MutableMapping):
    _type_processors = {
        Path: lambda p: str(p.resolve()),
        datetime: lambda d: d.isoformat(),
    }

    def __init__(self, data: Optional[Union[Dict[str, Any], 'Metadata']] = None):
        self._data: Dict[str, JsonValue] = {}
        if data is not None:
            raw_data = data._data if isinstance(data, Metadata) else data
            processed_data = {
                k: self._process_value(v) for k, v in raw_data.items()
            }
            self.update(processed_data)
</code></pre>
<h3 id="future-considerations">Future Considerations</h3>
<ol>
<li>Deep Validation</li>
</ol>
<p><code>python
   def validate_json_value(value: Any, path: str = "") -&gt; bool:
       if isinstance(value, dict):
           return all(
               validate_json_value(v, f"{path}.{k}") 
               for k, v in value.items()
           )
       if isinstance(value, list):
           return all(
               validate_json_value(v, f"{path}[{i}]") 
               for i, v in enumerate(value)
           )
       return isinstance(value, (str, int, float, bool, type(None)))</code></p>
<ol>
<li>Serializable Interface</li>
</ol>
<p>```python
   class Serializable(Protocol):
       def to_dict(self) -&gt; Dict[str, JsonValue]: ...</p>
<p>class Metadata(MutableMapping):
       def _process_value(self, value: Any) -&gt; JsonValue:
           if isinstance(value, Serializable):
               return value.to_dict()
           # existing processing...
   ```</p>
<ol>
<li>Update Validation</li>
</ol>
<p><code>python
   def __setitem__(self, key: str, value: Any) -&gt; None:
       self._data[key] = self._process_value(value)</code></p>
<h3 id="decision_2">Decision</h3>
<p>For the prototyping phase:</p>
<ol>
<li>Keep current shallow validation</li>
<li>Document known limitations</li>
<li>Use type processors for common cases</li>
<li>Accept some type safety compromises for flexibility</li>
</ol>
<h3 id="consequences_2">Consequences</h3>
<p>Positive:</p>
<ul>
<li>Simple, workable implementation for prototyping</li>
<li>Clear path for future enhancement</li>
<li>Basic type safety for common cases</li>
<li>Flexible enough for rapid development</li>
</ul>
<p>Negative:</p>
<ul>
<li>Incomplete validation</li>
<li>Potential for invalid nested data</li>
<li>No standardized object serialization</li>
<li>Some type safety compromises</li>
</ul>
<h3 id="future-directions">Future Directions</h3>
<ol>
<li>Validation Options:</li>
<li>Full recursive validation</li>
<li>Schema-based validation</li>
<li>
<p>Custom validation rules</p>
</li>
<li>
<p>Serialization Enhancement:</p>
</li>
<li>Standard serialization protocol</li>
<li>Custom serializers registry</li>
<li>
<p>Validation hooks</p>
</li>
<li>
<p>Type Processing:</p>
</li>
<li>Extended type processor registry</li>
<li>Custom processor registration</li>
<li>Update validation</li>
</ol>
<h3 id="notes_2">Notes</h3>
<p>This design purposefully favors flexibility and simplicity during prototyping while documenting paths for future enhancement. The current implementation acknowledges and accepts certain limitations in favor of development velocity.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>