
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This catalog lists core utility modules used across the TNH‑Scholar codebase. It provides a quick reference for shared abstractions, their purpose, API highlights, and stability. All modules are currently in **Prototype** phase, with most stable in active use.">
      
      
      
      
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>TNH‑Scholar Utilities Catalog - TNH Scholar Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.a40c8224.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tnhscholar-utilities-catalog" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="TNH Scholar Documentation" class="md-header__button md-logo" aria-label="TNH Scholar Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TNH Scholar Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              TNH‑Scholar Utilities Catalog
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/aaronksolomon/tnh-scholar" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="TNH Scholar Documentation" class="md-nav__button md-logo" aria-label="TNH Scholar Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    TNH Scholar Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aaronksolomon/tnh-scholar" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../getting-started/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../getting-started/quick-start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../getting-started/configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/patterns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pattern System
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/best-practices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CLI Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            CLI Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/tnh-fab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tnh-fab
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/audio-transcribe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    audio-transcribe
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/ytt-fetch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ytt-fetch
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/nfmt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nfmt
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/token-count/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    token-count
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/tnh-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tnh-setup
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Development
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../development/system-design/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Overview
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../development/contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Design
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../development/design-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Design Guide
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_2" >
        
          
          <label class="md-nav__link" for="__nav_6_3_2" id="__nav_6_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CLI Design
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_2">
            <span class="md-nav__icon md-icon"></span>
            CLI Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_2_1" >
        
          
          <label class="md-nav__link" for="__nav_6_3_2_1" id="__nav_6_3_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    TNH-FAB
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_3_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_2_1">
            <span class="md-nav__icon md-icon"></span>
            TNH-FAB
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tnh-fab/design/text-processing-cli-design-v1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v1
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tnh-fab/design/text-processing-cli-design-v2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v2
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_2_2" >
        
          
          <label class="md-nav__link" for="__nav_6_3_2_2" id="__nav_6_3_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    YTT-Fetch
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_3_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_2_2">
            <span class="md-nav__icon md-icon"></span>
            YTT-Fetch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ytt-fetch/adr/adr-yf00-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  
    
  
  
    <span class="md-status md-status--historical"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ytt-fetch/adr/adr-yf01-transcript-source-handling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transcript Source
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ytt-fetch/adr/adr-yf02-yt-dlp-transcripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YT-DLP Integration
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ytt-fetch/design/yt-dlp-vs-youtube-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Comparison
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup-tnh/design/setup-design/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SETUP-TNH
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../docs-design/design/documentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docs-Design
  </span>
  
    
  
  
    <span class="md-status md-status--processing"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_2" >
        
          
          <label class="md-nav__link" for="__nav_6_4_2" id="__nav_6_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Docs-Planning
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_2">
            <span class="md-nav__icon md-icon"></span>
            Docs-Planning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs-design/planning/roadmap.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roadmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs-design/planning/maintenance.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Maintenance
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5" >
        
          
          <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Research
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5">
            <span class="md-nav__icon md-icon"></span>
            Research
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../gpt_4o_search_query_text_pair_testing/testing_input_output.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query Generation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../gpt_4o_translations_experiments/passage_test.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Translation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../translation_research.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Translation Research
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../preliminary_feasibility_study.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Feasibility Study
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#timing_utilspy-stable" class="md-nav__link">
    <span class="md-ellipsis">
      timing_utils.py — Stable
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json_utilspy-stable" class="md-nav__link">
    <span class="md-ellipsis">
      json_utils.py — Stable
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#langpy-stable" class="md-nav__link">
    <span class="md-ellipsis">
      lang.py — Stable
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file_utilspy-stable" class="md-nav__link">
    <span class="md-ellipsis">
      file_utils.py — Stable
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_io_utilspy-stable" class="md-nav__link">
    <span class="md-ellipsis">
      user_io_utils.py — Stable
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validatepy-stable" class="md-nav__link">
    <span class="md-ellipsis">
      validate.py — Stable
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging_configpy-stable" class="md-nav__link">
    <span class="md-ellipsis">
      logging_config.py — Stable
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#progress_utilspy-experimental" class="md-nav__link">
    <span class="md-ellipsis">
      progress_utils.py — Experimental
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tnh_audio_segmentpy-stable" class="md-nav__link">
    <span class="md-ellipsis">
      tnh_audio_segment.py — Stable
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#webhook_serverpy-evolving" class="md-nav__link">
    <span class="md-ellipsis">
      webhook_server.py — Evolving
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#observability-obs-doc-only" class="md-nav__link">
    <span class="md-ellipsis">
      Observability / obs (doc-only)
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="tnhscholar-utilities-catalog">TNH‑Scholar Utilities Catalog</h1>
<p>This catalog lists core utility modules used across the TNH‑Scholar codebase. It provides a quick reference for shared abstractions, their purpose, API highlights, and stability. All modules are currently in <strong>Prototype</strong> phase, with most stable in active use.</p>
<table>
<thead>
<tr>
<th>Status</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>Stable</td>
<td>Used widely; interface considered reliable</td>
</tr>
<tr>
<td>Evolving</td>
<td>Actively refined; API may change</td>
</tr>
<tr>
<td>Experimental</td>
<td>Early or niche use; subject to major revision</td>
</tr>
</tbody>
</table>
<h2 id="timing_utilspy-stable">timing_utils.py — Stable</h2>
<p><strong>Module:</strong> <code>tnh_scholar.utils.timing_utils</code></p>
<p><strong>Purpose:</strong> Small, explicit time type for millisecond-based values. Replaces ad-hoc float timestamps and makes conversions and arithmetic explicit and type-safe.</p>
<p><strong>Key APIs:</strong></p>
<ul>
<li><code>class TimeMs(int)</code> — lightweight typed integer representing milliseconds. Supports construction from int/float/TimeMs, arithmetic (+, -, radd, rsub), and pydantic core schema integration.</li>
<li><code>TimeMs.from_seconds(seconds: float) -&gt; TimeMs</code> — construct from seconds.</li>
<li><code>TimeMs.to_ms() -&gt; int</code> — return milliseconds as int.</li>
<li><code>TimeMs.to_seconds() -&gt; float</code> — return seconds as float.</li>
<li><code>convert_sec_to_ms(val: float) -&gt; int</code> — helper to convert seconds to ms (rounded).</li>
<li><code>convert_ms_to_sec(ms: int) -&gt; float</code> — helper to convert ms to seconds.</li>
</ul>
<p><strong>Used by:</strong> Any module that needs deterministic millisecond arithmetic or pydantic models (e.g., provenance, latency reporting).</p>
<p><strong>Notes:</strong> Designed to be small and explicit; does not attempt to provide clocks or wall-time semantics — that belongs in an Observer/tracer implementation.</p>
<h2 id="json_utilspy-stable">json_utils.py — Stable</h2>
<p><strong>Module:</strong> <code>tnh_scholar.utils.json_utils</code></p>
<p><strong>Purpose:</strong> Robust JSON helpers for files and pydantic models: read/write JSON, load JSONL, and format files consistently.</p>
<p><strong>Key APIs:</strong></p>
<ul>
<li><code>write_data_to_json_file(file: Path, data: dict | list, indent=4, ensure_ascii=False) -&gt; None</code> — serialize data to JSON and write to disk, creating parent folders.</li>
<li><code>save_model_to_json(file: Path, model: BaseModel, indent=4, ensure_ascii=False) -&gt; None</code> — dump a Pydantic model (uses <code>model_dump()</code>), writing via <code>write_data_to_json_file</code>.</li>
<li><code>load_jsonl_to_dict(file_path: Path) -&gt; list[dict]</code> — read a JSONL file into a list of dicts.</li>
<li><code>load_json_into_model(file: Path, model: type[BaseModel]) -&gt; BaseModel</code> — load JSON and validate/construct the given Pydantic model type (raises ValueError on failure).</li>
<li><code>format_json(file: Path) -&gt; None</code> — read and re-write JSON file with indentation and ensure_ascii=False.</li>
</ul>
<p><strong>Used by:</strong> Config I/O, model persistence, dataset pre-processing, and simple scripting tasks.</p>
<p><strong>Notes:</strong> Functions raise informative exceptions (ValueError / IOError) on failure to make error handling explicit to callers.</p>
<h2 id="langpy-stable">lang.py — Stable</h2>
<p><strong>Module:</strong> <code>tnh_scholar.utils.lang</code></p>
<p><strong>Purpose:</strong> Language detection helpers using <code>langdetect</code> for short samples and <code>pycountry</code> for mapping codes to English names.</p>
<p><strong>Key APIs:</strong></p>
<ul>
<li><code>get_language_code_from_text(text: str) -&gt; str</code> — returns ISO-639-1 code (e.g., 'en') or 'un' when detection fails; raises ValueError if input is empty.</li>
<li><code>get_language_name_from_text(text: str) -&gt; str</code> — returns English language name for detected code (uses <code>pycountry</code>).</li>
<li><code>get_language_from_code(code: str) -&gt; str</code> — maps ISO code to human name or returns 'Unknown' with a warning.</li>
<li><code>_get_sample_text(text: str, words_per_sample: int = 30) -&gt; str</code> — internal helper that extracts 3 samples (start, 1/3, 2/3) to improve detection for long text.</li>
</ul>
<p><strong>Used by:</strong> Metadata extraction, normalization, and any pipeline that needs a quick language hint.</p>
<p><strong>Notes:</strong> Defensive for long/short texts; returns 'un' when detection fails to avoid exceptions in pipelines.</p>
<h2 id="file_utilspy-stable">file_utils.py — Stable</h2>
<p><strong>Module:</strong> <code>tnh_scholar.utils.file_utils</code></p>
<p><strong>Purpose:</strong> Common filesystem helpers used by CLI and batch jobs: ensure directories, write/read strings, copy files matching patterns, and filename sanitization.</p>
<p><strong>Key APIs:</strong></p>
<ul>
<li><code>DEFAULT_MAX_FILENAME_LENGTH: int</code> — default max length used by sanitizers.</li>
<li><code>FileExistsWarning</code> — custom warning class.</li>
<li><code>ensure_directory_exists(dir_path: Path) -&gt; bool</code> — mkdir -p semantics; returns True on success.</li>
<li><code>ensure_directory_writable(dir_path: Path) -&gt; None</code> — verifies/creates dir and tests writability using a NamedTemporaryFile (raises on failure).</li>
<li><code>iterate_subdir(directory: Path, recursive: bool = False) -&gt; Generator[Path, None, None]</code> — yield subdirectory Paths (one level or recursive).</li>
<li><code>path_source_str(path: Path) -&gt; str</code> — return resolved string path.</li>
<li><code>copy_files_with_regex(source_dir: Path, destination_dir: Path, regex_patterns: list[str], preserve_structure: bool = True) -&gt; None</code> — copy files one level down that match patterns; creates destination directories as needed.</li>
<li><code>read_str_from_file(file_path: Path) -&gt; str</code> — read full text content.</li>
<li><code>write_str_to_file(file_path: PathLike, text: str, overwrite: bool = False) -&gt; None</code> — write text with optional overwrite guard.</li>
<li><code>sanitize_filename(filename: str, max_length: int = DEFAULT_MAX_FILENAME_LENGTH) -&gt; str</code> — normalize/slugify and truncate to safe ascii filename.</li>
<li><code>to_slug(string: str) -&gt; str</code> — produce a URL‑friendly slug (lowercase, hyphens).</li>
<li><code>path_as_str(path: Path) -&gt; str</code> — alias for resolved path as string.</li>
</ul>
<p><strong>Used by:</strong> Any code that reads/writes files, prepares artifacts for storage, or needs consistent filename handling.</p>
<p><strong>Notes:</strong> The module intentionally surfaces IO exceptions for callers to handle; it prefers explicit failures in prototype code.</p>
<h2 id="user_io_utilspy-stable">user_io_utils.py — Stable</h2>
<p><strong>Module:</strong> <code>tnh_scholar.utils.user_io_utils</code></p>
<p><strong>Purpose:</strong> Small cross-platform console utilities for interactive scripts (single-character input, confirmation prompts), with fallbacks for Jupyter/IPython.</p>
<p><strong>Key APIs:</strong></p>
<ul>
<li><code>get_single_char(prompt: Optional[str] = None) -&gt; str</code> — read a single character without requiring Enter in terminal environments; falls back to <code>input()</code> in notebooks.</li>
<li><code>get_user_confirmation(prompt: str, default: bool = True) -&gt; bool</code> — prompt for a y/n confirmation using <code>get_single_char</code>; returns default on Enter.</li>
</ul>
<p><strong>Used by:</strong> CLI scripts, interactive tooling, and any dev tooling that wants compact confirmations.</p>
<p><strong>Notes:</strong> The implementation handles Windows (msvcrt) and Unix (termios/tty) cases and deliberately falls back in interactive notebook environments.</p>
<h2 id="validatepy-stable">validate.py — Stable</h2>
<p><strong>Module:</strong> <code>tnh_scholar.utils.validate</code></p>
<p><strong>Purpose:</strong> Lightweight environment checks and user-facing error messages for required environment variables and features.</p>
<p><strong>Key APIs:</strong></p>
<ul>
<li><code>get_env_message(missing_vars: List[str], feature: str = "this feature") -&gt; str</code> — human-friendly message explaining how to set missing env vars.</li>
<li><code>check_env(required_vars: Set[str], feature: str = "this feature", output: bool = True) -&gt; bool</code> — returns True if all required vars are present; logs/prints helpful message if not.</li>
<li><code>check_openai_env(output: bool = True) -&gt; bool</code> — convenience wrapper checking <code>OPENAI_API_KEY</code>.</li>
<li><code>check_ocr_env(output: bool = True) -&gt; bool</code> — convenience wrapper checking <code>GOOGLE_APPLICATION_CREDENTIALS</code>.</li>
</ul>
<p><strong>Used by:</strong> Startup checks, test harnesses, and preflight validation in scripts.</p>
<h2 id="logging_configpy-stable">logging_config.py — Stable</h2>
<p><strong>Module:</strong> <code>tnh_scholar.logging_config</code></p>
<p><strong>Purpose:</strong> Centralized, production-grade logging configuration for the entire TNH-Scholar system. Provides color/plain text logs in development, JSON logs in production, queue-based asynchronous logging, file rotation, noise suppression, and Python warnings capture. Designed for library compatibility and app-layer configurability.</p>
<p><strong>Key APIs:</strong></p>
<ul>
<li><code>setup_logging(...)</code> — main initializer; reads environment variables to configure log level, handlers, formatters, and rotation. Should be called once by the <em>application layer</em> (CLI, Streamlit, API service).</li>
<li><code>get_logger(name: str)</code> — preferred helper to retrieve a logger for a given module or component.</li>
<li><code>get_child_logger(name: str, console=False, separate_file=False)</code> — legacy helper for modules needing ad-hoc console or file handlers; maintained for backward compatibility.</li>
<li><code>setup_logging_legacy(...)</code> — deprecated alias to <code>setup_logging()</code> with a <code>DeprecationWarning</code>.</li>
<li><code>priority_info(message, *args, **kwargs)</code> — legacy helper method on logger instances; emits at custom level 25 with a deprecation warning; prefer <code>logger.info(..., extra={"priority": "high"})</code>.</li>
</ul>
<p><strong>Environment Variables:</strong></p>
<ul>
<li><code>APP_ENV</code>: <code>dev</code> | <code>prod</code> | <code>test</code> (default: <code>dev</code>)</li>
<li><code>LOG_JSON</code>: <code>true|false</code> (enable JSON output; default true in prod)</li>
<li><code>LOG_STDOUT</code>: <code>true|false</code> (emit to stdout)</li>
<li><code>LOG_FILE_ENABLE</code>: <code>true|false</code></li>
<li><code>LOG_FILE_PATH</code>: path to log file (default <code>./logs/main.log</code>)</li>
<li><code>LOG_ROTATE_BYTES</code>, <code>LOG_ROTATE_WHEN</code>, <code>LOG_BACKUPS</code>: control file rotation</li>
<li><code>LOG_USE_QUEUE</code>: <code>true|false</code> (async logging)</li>
<li><code>LOG_STREAM</code>: <code>stdout|stderr</code> (default <code>stderr</code>; dev defaults to <code>stdout</code>)</li>
<li><code>LOG_COLOR</code>: <code>true|false|auto</code></li>
<li><code>LOG_CAPTURE_WARNINGS</code>: <code>true|false</code> (redirect Python warnings)</li>
<li><code>LOG_SUPPRESS</code>: comma-separated list of noisy modules to set to WARNING</li>
<li><code>LOG_LEVEL</code>: base log level (default <code>INFO</code>)</li>
</ul>
<p><strong>Usage:</strong></p>
<ul>
<li>Application entrypoint:</li>
</ul>
<p><code>python
  from tnh_scholar.logging_config import setup_logging, get_logger
  setup_logging()  # read from environment
  log = get_logger(__name__)
  log.info("app started", extra={"service": "gen-ai"})</code></p>
<ul>
<li>Library/service:</li>
</ul>
<p><code>python
  from tnh_scholar.logging_config import get_logger
  log = get_logger(__name__)
  log.debug("internal operation")</code></p>
<p><strong>Backward Compatibility:</strong></p>
<ul>
<li>Supports existing modules using <code>get_child_logger(__name__)</code> without change.</li>
<li>Legacy custom level <code>PRIORITY_INFO</code> retained for compatibility but deprecated.</li>
</ul>
<p><strong>Notes:</strong></p>
<ul>
<li>Does not configure the <em>root</em> logger; uses the project base logger (<code>tnh</code>) for isolation.</li>
<li>Default behavior:</li>
<li><strong>dev:</strong> plain or color text, stdout, no queue.</li>
<li><strong>prod:</strong> JSON logs to stderr, queue enabled, suitable for structured log collection.</li>
<li>Integrates with Python’s <code>logging.captureWarnings()</code> when enabled.</li>
</ul>
<h2 id="progress_utilspy-experimental">progress_utils.py — Experimental</h2>
<p><strong>Module:</strong> <code>tnh_scholar.utils.progress_utils</code></p>
<p><strong>Purpose:</strong> Time-based progress displays. Provides both a tqdm-backed expected-time bar (with delayed start to avoid flicker) and a simple dot/spinner progress for lightweight cases.</p>
<p><strong>Key APIs:</strong></p>
<ul>
<li><code>ExpectedTimeTQDM(expected_time: float, display_interval: float = 0.5, desc: str = "Time-based Progress", delay_start: float = 1.0)</code> — context manager that shows a tqdm bar after an optional delay.</li>
<li><code>TimeProgress(expected_time: Optional[float] = None, display_interval: float = 1.0, desc: str = "")</code> — context manager printing a lightweight spinner/dots with elapsed/expected time.</li>
</ul>
<p><strong>Notes:</strong> Both are intended for CLI tooling (not GUI). <code>ExpectedTimeTQDM</code> spawns a background thread to update the bar and avoids creating the bar if the task completes before <code>delay_start</code>.</p>
<h2 id="tnh_audio_segmentpy-stable">tnh_audio_segment.py — Stable</h2>
<p><strong>Module:</strong> <code>tnh_scholar.utils.tnh_audio_segment</code></p>
<p><strong>Purpose:</strong> Thin, typed wrapper around <code>pydub.AudioSegment</code> to give clearer typing, a small API surface, and convenience constructors used by the audio pipeline.</p>
<p><strong>Key APIs:</strong></p>
<ul>
<li><code>class TNHAudioSegment</code> — wrapper with methods:</li>
<li><code>from_file(file: str | Path | BytesIO, format: str | None = None, **kwargs) -&gt; TNHAudioSegment</code></li>
<li><code>export(out_f: str | BinaryIO, format: str, **kwargs) -&gt; None</code></li>
<li><code>silent(duration: int) -&gt; TNHAudioSegment</code></li>
<li><code>empty() -&gt; TNHAudioSegment</code></li>
<li><code>__getitem__(key: int | slice) -&gt; TNHAudioSegment</code></li>
<li><code>__add__</code>, <code>__iadd__</code>, <code>__len__</code>, and <code>raw</code> property exposing underlying <code>_AudioSegment</code>.</li>
</ul>
<p><strong>Used by:</strong> Audio ingestion, concatenation, slicing, and export in diarization/transcription flows.</p>
<h2 id="webhook_serverpy-evolving">webhook_server.py — Evolving</h2>
<p><strong>Module:</strong> <code>tnh_scholar.utils.webhook_server</code></p>
<p><strong>Purpose:</strong> Small development helper to run a local Flask webhook endpoint and (optionally) create a public tunnel via <code>pylt</code> (localtunnel client). Useful for testing provider callbacks and webhooks during development.</p>
<p><strong>Key APIs:</strong></p>
<ul>
<li><code>class WebhookServer</code> — convenience wrapper providing:</li>
<li><code>start_server(host: str = "127.0.0.1", port: int = 0) -&gt; str</code> — starts a local Flask server on an available port; returns server URL.</li>
<li><code>wait_for_webhook(timeout: float = 30.0) -&gt; dict | None</code> — block until a webhook payload arrives or timeout; returns parsed payload.</li>
<li><code>create_tunnel(subdomain: Optional[str] = None) -&gt; str</code> — spawn <code>pylt</code> subprocess to create a tunnel and return the public URL (relies on <code>pylt</code> being installed).</li>
<li><code>close_tunnel()</code> — terminate the tunnel subprocess safely.</li>
<li><code>shutdown_server()</code> and <code>cleanup()</code> — helper methods to stop the server and any background processes.</li>
</ul>
<p><strong>Notes:</strong> This module is primarily for local development. The tunnel creation parses subprocess stdout/stderr and depends on the <code>pylt</code> client; use with care in CI or headless environments.</p>
<h2 id="observability-obs-doc-only">Observability / obs (doc-only)</h2>
<p>The design docs reference a lightweight Observer/ObsSpan protocol used to capture phase timings and attach metadata to spans. The docs include small Protocol examples (ObsSpan as a context manager with <code>duration_ms</code> and <code>Observer.phase(name, **fields) -&gt; ObsSpan</code>) and a <code>NoOpObserver</code> used for tests or when tracing is not needed.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>